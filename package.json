{
  "name": "Wallblog",
  "version": "1.10.1",
  "repository": "https://github.com/johanpoirier/wallblog",
  "private": true,
  "devDependencies": {
    "babel-core": "^6.4.0",
    "babel-loader": "^6.2.1",
    "babel-preset-es2015": "^6.3.13",
    "clean-css": "^3.4.9",
    "exports-loader": "^0.6.2",
    "handlebars-loader": "^1.1.4",
    "hashmark": "^3.1.0",
    "htmlprocessor": "^0.2.1",
    "imagemin-pngquant": "^4.0.0",
    "imports-loader": "^0.6.5",
    "json-loader": "^0.5.4",
    "live-reload": "^1.1.0",
    "parallelshell": "^2.0.0",
    "preprocess": "^3.0.2",
    "replaceinfiles": "^1.1.4",
    "rimraf": "^2.2.8",
    "run-sequence": "^1.1.0",
    "watch": "^0.17.1",
    "webpack": "^1.12.10"
  },
  "dependencies": {
    "backbone": "^1.2.3",
    "hammerjs": "^2.0.6",
    "handlebars": "^4.0.5",
    "keymaster": "^1.6.2",
    "jquery": "^2.2.0",
    "moment": "^2.11.1",
    "underscore": "^1.8.3"
  },
  "config": {
    "debug": false
  },
  "scripts": {
    "clean": "rimraf dist/js dist/css dist/index.* dist/font/ dist/img/",

    "precopy": "npm run clean -s && mkdir -p dist/img && mkdir -p dist/font && mkdir -p dist/pictures",
    "copy": "npm run copy:images -s && npm run copy:fonts -s && npm run copy:misc -s && npm run copy:pictures -s",
    "copy:images": "cp app/img/* dist/img",
    "copy:pictures": "cp app/pictures/empty* dist/pictures",
    "copy:fonts": "cp app/font/* dist/font",
    "copy:misc": "cp app/index.php dist/ && cp app/.htaccess dist/ && cp app/favicon.ico dist/ && cp app/robots.txt dist/ && cp app/manifest.* dist/ && cp app/js/analytics.js dist/",

    "prebuild": "npm run copy",
    "prebuild:scripts": "npm run build:config",
    "prebuild:styles": "mkdir -p dist/css",
    "prebuild:sw": "mkdir -p dist/sw",
    "build": "npm run build:scripts -s -- -d && npm run build:styles -s && npm run build:markup -- -e dev && npm run build:sw",
    "build:scripts": "webpack",
    "build:styles": "cleancss --skip-rebase app/css/*.css -o dist/css/main.css",
    "build:markup": "htmlprocessor app/index.html -o dist/index.html",
    "build:sw": "cp app/js/sw/notifications.js dist/sw/",
    "build:config": "node scripts/config.js",

    "cachebuster": "hashmark -l 8 --cwd dist {js,css}/*.{js,css} '{dir}/{name}{hash}{ext}' | replaceinfiles -s 'dist/index.html' -d '{dir}/{base}'",
    "postcachebuster": "rimraf dist/js/wallblog.js && rimraf dist/css/main.css",

    "live-reload": "live-reload --port=9091 --delay=100 dist/js/ dist/css/",

    "watch": "parallelshell \"npm run watch:scripts\" \"npm run watch:styles\"",
    "watch:scripts": "webpack -d --watch",
    "watch:styles": "watch \"npm run build:styles\" app/css/",

    "predev": "npm run build -s",
    "dev": "parallelshell \"npm run watch\" \"npm run live-reload\"",

    "package": "npm run copy -s && npm run build:scripts -s -- -p && npm run build:styles -s && npm run build:markup -s -- -e dist && npm run build:sw && npm run cachebuster -s"
  }
}
